<!DOCTYPE html>
<html>
<script>

    function test() {
        var il=[];
        var promise = new Promise(function (resolve, reject) {
            // do a thing, possibly async, then...
            if (1 == 1) {
                resolve("Stuff worked!");
            } else {
                reject(Error("It broke"));
            }
        });

        var res = promise.then(function (result) {
                il.push("koko");
                console.log("Success!", result);
                return result;
        }).catch(function (error) {
                console.log("Failed!", error);
        });

        console.log("il:" + res[0]);
    }




</script>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>JS Bin</title>
</head>
<body>

</body>
</html>